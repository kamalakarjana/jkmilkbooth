{% extends "base.html" %}

{% block title %}Edit Collection{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="fas fa-edit"></i> Edit Collection</h2>

<div class="card">
    <div class="card-header">
        Edit Collection #{{ entry.id }}
    </div>
    <div class="card-body">
        <form method="post">
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Supplier</label>
                    <input type="text" class="form-control" value="{{ entry.supplier.supplier_id }} - {{ entry.supplier.name }}" readonly>
                </div>
                <div class="col-md-2">
                    <label class="form-label">Milk Type</label>
                    <select name="milk_type" class="form-select">
                        <option value="buffalo" {% if entry.milk_type == 'buffalo' %}selected{% endif %}>Buffalo</option>
                        <option value="cow" {% if entry.milk_type == 'cow' %}selected{% endif %}>Cow</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label class="form-label">Date</label>
                    <input type="date" name="date" class="form-control" value="{{ entry.date }}">
                </div>
                <div class="col-md-2">
                    <label class="form-label">Session</label>
                    <select name="session" class="form-select">
                        <option value="morning" {% if entry.session == 'morning' %}selected{% endif %}>Morning</option>
                        <option value="evening" {% if entry.session == 'evening' %}selected{% endif %}>Evening</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label class="form-label">Liters</label>
                    <input type="number" step="0.01" name="liters" class="form-control" value="{{ entry.liters }}" required>
                </div>
                <div class="col-md-2">
                    <label class="form-label">Fat %</label>
                    <input type="number" step="0.1" name="fat" class="form-control" value="{{ entry.fat }}" required>
                </div>
            </div>
            <div class="row g-3 mt-2">
                <div class="col-md-10">
                    <label class="form-label">Note</label>
                    <input type="text" name="note" class="form-control" value="{{ entry.note or '' }}">
                </div>
                <div class="col-md-2 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-save"></i> Update
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="mt-3">
    <a href="{{ url_for('daily', date=entry.date) }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Daily
    </a>
</div>
{% endblock %}
